<!DOCTYPE html>
<html>

<head>
  <title>Banking Chatbot</title>
  <link rel="stylesheet" href="static/css/style.css" />
</head>

<body>

  <div id="main_wrapper">

    <!------ Chatbot Introduction ------>
    <div id="chatbot-info-panel">

      <div id="info-header">
        <h2>ğŸ¦ About This Banking Chatbot</h2>
      </div>

      <div id="info-content">
        <p>
          This chatbot helps users explore <strong>Bank of Irelandâ€™s financial products</strong> â€”
          including mortgages, loans, credit cards, current accounts, savings, and pensions.
          It retrieves verified information directly from official product pages to give you
          <strong>accurate, quick, and helpful answers</strong>.
        </p>

        <h3>ğŸ’¬ What You Can Ask</h3>
        <ul>
          <li>â€œHow much can I borrow for my first home?â€</li>
          <li>â€œWhatâ€™s the difference between a personal loan and a car loan?â€</li>
          <li>â€œAm I eligible for a Smart Start Account for my child?â€</li>
          <li>â€œWhat are the fees for a Graduate Current Account?â€</li>
          <li>â€œHow do I apply for a pension with Bank of Ireland?â€</li>
        </ul>

        <h3>âš™ï¸ How It Works</h3>
        <p>
          The chatbot uses <strong>Retrieval-Augmented Generation (RAG)</strong> to search a curated
          knowledge base of product descriptions and guides, ensuring responses are up to date and
          accurate.
        </p>
        <ul>
          <li><strong>Vector Search (Chroma + Hugging Face API):</strong> Finds semantically related content.</li>
          <li><strong>Dynamic Context Response:</strong> Answers are generated from the retrieved sources.</li>
        </ul>

        <h3>ğŸ“š Knowledge Base Covers</h3>
        <ul class="columns">
          <li><strong>Mortgages:</strong> First-Time Buyer, Home Mover, Buy-to-Let</li>
          <li><strong>Loans:</strong> Personal, Car, Student</li>
          <li><strong>Credit Cards:</strong> Classic, Platinum, Student</li>
          <li><strong>Accounts:</strong> Graduate, Basic, Smart Start</li>
          <li><strong>Savings:</strong> SuperSaver, Save for Kids</li>
          <li><strong>Pensions:</strong> Retirement, Company, Calculators</li>
        </ul>

        <h3>ğŸ”’ Powered By</h3>
        <ul>
          <li><strong>LangChain + FastAPI</strong> for backend logic</li>
          <li><strong>Hugging Face Inference API</strong> for embeddings</li>
          <li><strong>Chroma Vector Store</strong> (Local Vector DB) for quick search</li>
          <li><strong>Meta-Llama-3-8B-Instruct</strong> for generation. Model hosted on my Hugging Face Space (Private)</li>
        </ul>

        <h3>âœ¨ Features</h3>
        <ul>
          <li>Instant answers on banking products and eligibility</li>
          <li>Accurate retrieval from verified product pages</li>
          <li>Context-aware responses with source URLs</li>
          <li>Privacy-first: no personal data stored or shared</li>
          <li>Mobile-friendly design</li>
        </ul>
      </div>

      <div id="source-section">

        <div class="source-select-container">
          <h3>ğŸ“¦ Resources</h3>
          <p>
            Select a resource below to view the <strong>products.json</strong> file or pipeline diagrams used by the chatbot.
          </p>
      
          <select id="resourceSelect">
            <option value="">-- Choose a resource --</option>
            <option value="/view-json">View Products JSON</option>
            <option value="/download-json">Download Products JSON</option>
            <option value="/view-image/data_pipeline">View Data Pipeline Diagram</option>
            <option value="/view-image/qr_pipeline">View Queryâ€“Response Pipeline</option>
          </select>
        </div>
      
      </div>
    </div>
    <!------ Chatbot Introduction End ------>

    <!------ Chatbot section ------>
    <div class="chat-container">
      <h2>Ask your banking assistant</h2>
      <div id="chatbox"></div>

      <form id="chat-form">
        <textarea id="user-input" placeholder="Ask me something..." autocomplete="off" required></textarea>
        <button type="submit">Send</button>
      </form>
    </div>
    <!------ Chatbot section end ------>

  </div> <!-- âœ… main_wrapper properly closed -->

  <!-- Modal -->
  <div id="reportModal" style="display: none; position: fixed; top: 10%; left: 50%; transform: translateX(-50%);
    width: 80%; max-width: 600px; background: white; padding: 20px; box-shadow: 0 0 20px rgba(0,0,0,0.3);
    z-index: 9999; border-radius: 8px; font-family: sans-serif;">
    <h3>ğŸ“ Prompt Evaluation</h3>
    <p><strong>Assertions:</strong></p>
    <ul id="modalAssertions"></ul>
    <p><strong>Prompt:</strong> <span id="modalPrompt"></span></p>
    <p><strong>Outputs:</strong></p>
    <pre id="modalOutputs" style="white-space: pre-wrap; background: #f5f5f5; padding: 10px;"></pre>
    <button onclick="document.getElementById('reportModal').style.display='none'" style="margin-top: 10px;">Close</button>
  </div>

  <script src="/static/js/app.js" defer></script>
  <script src="/static/js/configuration.js" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/markdown-it/dist/markdown-it.min.js"></script>

  <script>
    document.getElementById('resourceSelect').addEventListener('change', function () {
      const url = this.value;
      if (url) window.open(url, '_blank');
      this.selectedIndex = 0; // reset to default
    });
  </script>
  
</body>
</html>
